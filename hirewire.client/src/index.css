@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    background: linear-gradient(180deg, #f7f8fb 0%, #eef1f8 100%);
  }
  html.dark {
    background: linear-gradient(180deg, #070812 0%, #0b1220 100%);
  }
  body {
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  }
}

@layer components {
  .lux-card {
    @apply bg-white dark:bg-neutralGlass-800 rounded-xl-2 p-6 shadow-lux-1 transition-smooth;
    background-image: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.2));
    backdrop-filter: blur(6px) saturate(120%);
  }
  .lux-card:hover { @apply shadow-lux-2 transform -translate-y-1; }

  .lux-btn {
    @apply inline-flex items-center px-4 py-2 rounded-md font-semibold text-white transition-smooth;
    background: linear-gradient(90deg, #6b87ec 0%, #93d656 100%);
    box-shadow: 0 8px 30px rgba(14, 20, 56, 0.12);
  }
  .lux-btn-secondary { @apply bg-neutralGlass-100 dark:bg-neutralGlass-700 text-gray-900 dark:text-gray-100; }

  .glass-input { @apply w-full px-3 py-2 rounded-md border-0 ring-1 ring-inset ring-neutralGlass-200 dark:ring-neutralGlass-700 bg-white/60 dark:bg-neutralGlass-900/60 text-gray-900 dark:text-gray-100; }

  .table-lux thead { @apply bg-gradient-to-r from-brand-50 to-brand-100; }
  .table-lux td, .table-lux th { @apply px-6 py-4; }
}

@layer utilities {
  @keyframes floaty { 0% { transform: translateY(0) } 50% { transform: translateY(-6px) } 100% { transform: translateY(0) }}
  .animate-floaty { animation: floaty 6s ease-in-out infinite; }
}

/* Animation utilities */
@layer utilities {
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in-up { animation: fadeInUp 320ms ease forwards; }

  @keyframes subtleGlow {
    0% { box-shadow: 0 2px 0 rgba(0,0,0,0); }
    50% { box-shadow: 0 8px 30px rgba(2,132,199,0.06); }
    100% { box-shadow: 0 2px 0 rgba(0,0,0,0); }
  }
  .hover-glow:hover { animation: subtleGlow 900ms ease; }

  .transition-smooth { transition: all 180ms cubic-bezier(.2,.8,.2,1); }
}

/* Accessibility helpers */
:focus { outline: 3px solid rgba(99,102,241,0.18); outline-offset: 2px; }
:focus-visible {
  outline: 3px solid rgba(99,102,241,0.24);
  outline-offset: 3px;
}

/* Respect prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
  .animate-floaty,
  .animate-fade-in-up,
  .hover-glow,
  .lux-card:hover,
  .lux-btn:hover {
    animation: none !important;
    transition: none !important;
  }
}

/* Micro interactions */
.lux-card { transition: transform 240ms cubic-bezier(.2,.8,.2,1), box-shadow 240ms ease; }
.lux-card:hover { transform: translateY(-6px); }
.lux-btn { transition: transform 160ms ease, box-shadow 160ms ease; }
.lux-btn:active { transform: translateY(1px) scale(0.995); }

/* Improve focus styles for interactive elements */
button:focus, a:focus, input:focus, select:focus, textarea:focus {
  box-shadow: 0 0 0 3px rgba(99,102,241,0.12);
}

@layer base {
  html.dark body {
    @apply bg-gray-900 text-gray-100;
  }
  html body {
    @apply bg-gray-50 text-gray-900;
  }
}

@layer components {
  .btn {
    @apply px-4 py-2 rounded-lg font-medium transition-colors shadow-sm;
  }

  .btn-primary {
    @apply bg-primary-600 text-white hover:bg-primary-700 transform hover:-translate-y-0.5;
  }

  .btn-secondary {
    @apply bg-gray-200 text-gray-800 hover:bg-gray-300;
  }

  .btn-danger {
    @apply bg-red-600 text-white hover:bg-red-700;
  }

  .dark .btn-secondary {
    @apply bg-gray-700 text-gray-100 hover:bg-gray-600;
  }

  .input {
    @apply w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500;
  }

  .dark .input {
    @apply bg-gray-800 border-gray-600 text-gray-100;
  }

  .card {
    @apply bg-white rounded-xl shadow-sm p-6 transition-smooth;
  }

  .card-hover:hover { @apply transform -translate-y-0.5 shadow-lg; }

  /* subtle table row hover */
  .table-row-hover tr:hover { background-color: rgba(14,165,233,0.03); }
}

/* Small visual overrides to match previous pre-Tailwind appearance */
html, body {
  font-size: 16px;
}

/* Constrain SVG icon sizes (heroicons) to reasonable defaults) */
svg {
  width: 1rem;
  height: 1rem;
}

/* Utility: ensure icons used with Tailwind sizing still display correctly */
.w-4 { width: 1rem !important; }
.h-4 { height: 1rem !important; }

/* Dark-mode utility overrides - ensure these come after Tailwind so they override utility classes */

html.dark .text-gray-900 { color: #f3f4f6; }
html.dark .text-gray-800 { color: #e5e7eb; }
html.dark .text-gray-700 { color: #d1d5db; }
html.dark .text-gray-600 { color: #9ca3af; }
html.dark .text-gray-500 { color: #9ca3af; }
html.dark .text-gray-400 { color: #9ca3af; }

html.dark .bg-white { background-color: #1f2937; }
html.dark .bg-gray-50 { background-color: #0b1220; }
html.dark .bg-gray-100 { background-color: #111827; }

html.dark .divide-gray-200 > * + * { border-color: #374151; }
html.dark .divide-gray-300 > * + * { border-color: #4b5563; }
html.dark .divide-gray-500 > * + * { border-color: #6b7280; }

html.dark .border-gray-300 { border-color: #4b5563; }
html.dark .border-gray-200 { border-color: #374151; }
html.dark .ring-gray-300 { box-shadow: 0 0 0 1px rgba(75,85,99,0.6); }

/* Inputs, selects, textareas */
html.dark input, html.dark textarea, html.dark select {
  background-color: #0b1220;
  color: #e5e7eb;
  border-color: #374151;
}
html.dark input::placeholder, html.dark textarea::placeholder {
  color: #9ca3af;
  opacity: 1;
}

/* Tables */
html.dark table { border-color: #374151; }
html.dark thead { background-color: #0f1724; }
html.dark thead th { color: #e5e7eb; }
html.dark tbody tr:hover { background-color: rgba(255,255,255,0.02); }

/* Buttons */
html.dark .btn-secondary { background-color: #374151; color: #e5e7eb; }
html.dark .btn-primary { /* primary color stays but ensure text is readable */ color: #ffffff; }
html.dark .btn-danger { background-color: #dc2626; }

/* Cards */
html.dark .card { background-color: #111827; }

/* Utility: ensure headings and generic text inherit readable colors when explicit color classes set */
html.dark .text-white, html.dark .text-gray-50 { color: #f8fafc; }

/* Stronger global dark-mode fallbacks to ensure all text remains readable when .dark is set */
html.dark body {
  color: #e5e7eb !important; /* gray-200 */
}

/* Make headings and common text elements readable */
html.dark h1,
html.dark h2,
html.dark h3,
html.dark h4,
html.dark h5,
html.dark h6,
html.dark p,
html.dark label,
html.dark span,
html.dark a,
html.dark div,
html.dark li,
html.dark td,
html.dark th,
html.dark button,
html.dark input,
html.dark textarea,
html.dark select {
  color: #e5e7eb !important;
}

/* Lighter muted text for secondary content */
html.dark .text-gray-500,
html.dark .text-gray-400,
html.dark .placeholder\:text-gray-400::placeholder {
  color: #9ca3af !important;
}

/* Ensure table header / rows are darker and use readable text */
html.dark thead { background-color: #0f1724 !important; }
html.dark thead th { color: #e5e7eb !important; }
html.dark tbody tr:hover { background-color: rgba(255,255,255,0.02) !important; }

/* Background fallbacks for frequently used utility classes */
html.dark .bg-white { background-color: #0b1220 !important; }
html.dark .bg-gray-50 { background-color: #0b1220 !important; }
html.dark .bg-primary-100 { background-color: rgba(14,165,233,0.06) !important; }

/* Inputs and form controls */
html.dark input, html.dark textarea, html.dark select {
  background-color: #0b1220 !important;
  color: #e5e7eb !important;
  border-color: #374151 !important;
}

html.dark .ring-1 { box-shadow: 0 0 0 1px rgba(75,85,99,0.6) !important; }

/* Buttons */
html.dark .btn-secondary { background-color: #374151 !important; color: #e5e7eb !important; }
html.dark .btn-primary { color: #ffffff !important; }
html.dark .btn-danger { background-color: #dc2626 !important; color: #fff !important; }

/* Card fallback */
html.dark .card { background-color: #0f1724 !important; border-color: #1f2937 !important; }

/* Ensure placeholder text is visible */
html.dark ::placeholder { color: #9ca3af !important; opacity: 1; }
